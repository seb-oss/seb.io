@layer grid, grid.desktop, grid.tablet, grid.mobile, grid.debug;

@layer grid {
  :root {
    --gds-grid-col: repeat(4, 1fr);
    --gds-grid-col-start: 1;
    --gds-grid-col-end: -1;
    --gds-debug-color: hsla(241, 100%, 66%, 0.4);
    --gds-debug-color-container: rgba(255, 82, 197, 0.4);
    --gds-grid-col-gap: 0px;
  }

  gds-grid {
    display: grid;
    width: 100%;
    grid-template-columns: var(--gds-grid-col);
    grid-column-gap: var(--gds-grid-col-gap);
    grid-row-gap: var(--gds-grid-row-gap);

    & > gds-cell {
      height: 100%;
    }

    &[fluid] {
      --gds-grid-col-count: var(--gds-c);
      --gds-grid-col-width: 200px;
      --gap-count: calc(var(--gds-grid-col-count) - 1);
      --total-gap-width: calc(var(--gap-count) * var(--gds-grid-col-gap));
      --gds-grid-col-width-max: calc(
        (100% - var(--total-gap-width)) / var(--gds-grid-col-count)
      );

      grid-template-columns: repeat(
        auto-fill,
        minmax(
          max(var(--gds-grid-col-width), var(--gds-grid-col-width-max)),
          1fr
        )
      );
      text-wrap: balance;
    }
  }

  /* Spacings and gaps */
  /* prettier-ignore */
  gds-grid {
    &[gap-inline="small"]      { --gds-grid-col-gap: var(--gds-gap-sm) }
    &[gap-inline="medium"]     { --gds-grid-col-gap: var(--gds-gap-md) }
    &[gap-inline="large"]      { --gds-grid-col-gap: var(--gds-gap-lg) }
    &[gap-block="small"]      { --gds-grid-row-gap: var(--gds-gap-sm) }
    &[gap-block="medium"]     { --gds-grid-row-gap: var(--gds-gap-md) }
    &[gap-block="large"]      { --gds-grid-row-gap: var(--gds-gap-lg) }
    &[padding-block="small"]    { padding-block: var(--gds-gap-sm) }
    &[padding-block="medium"]   { padding-block: var(--gds-gap-md) }
    &[padding-block="large"]    { padding-block: var(--gds-gap-lg) }
    &[padding-inline="small"]    { padding-inline: var(--gds-gap-sm) }
    &[padding-inline="medium"]   { padding-inline: var(--gds-gap-md) }
    &[padding-inline="large"]    { padding-inline: var(--gds-gap-lg) }
  }

  /* prettier-ignore */
  gds-grid > gds-cell {

    &[padding="small"]    { padding: var(--gds-gap-sm) }
    &[padding="medium"]   { padding: var(--gds-gap-md) }
    &[padding="large"]    { padding: var(--gds-gap-lg) }

    /* Add centering vercial and horizontal options */
    /* Add aspect ratio options */
  }

  /* Justify */
  /* prettier-ignore */
  gds-grid {
    &[justify="start"]    { justify-items: start }
    &[justify="end"]      { justify-items: end }
    &[justify="center"]   { justify-items: center }
    &[justify="between"]  { justify-items: space-between }
    &[justify="around"]   { justify-items: space-around }
    &[justify="evenly"]   { justify-items: space-evenly }

    /* Align */
    &[align="start"]      { align-items: start }
    &[align="end"]        { align-items: end }
    &[align="center"]     { align-items: center }
    &[align="between"]    { align-items: space-between }
    &[align="around"]     { align-items: space-around }
    &[align="evenly"]     { align-items: space-evenly }
  }
  /* 

  grid-template-columns: repeat(auto-fill, minmax(auto, 1fr))
  grid-auto-columns: max-content;
  grid-template-columns: repeat(auto-fill, minmax(max-content, 1fr));  

  */

  /*
    Spaning columns (1-24)
    Attribute: span
    Example: span="8"
  */

  /* prettier-ignore */
  gds-grid > gds-cell {
    &[span^="1"]  { --gds-grid-col-start: 1   }
    &[span^="2"]  { --gds-grid-col-start: 2   }
    &[span^="3"]  { --gds-grid-col-start: 3   }
    &[span^="4"]  { --gds-grid-col-start: 4   }
    &[span^="5"]  { --gds-grid-col-start: 5   }
    &[span^="6"]  { --gds-grid-col-start: 6   }
    &[span^="7"]  { --gds-grid-col-start: 7   }
    &[span^="8"]  { --gds-grid-col-start: 8   }
    &[span^="9"]  { --gds-grid-col-start: 9   }
    &[span^="10"] { --gds-grid-col-start: 10  }
    &[span^="11"] { --gds-grid-col-start: 11  }
    &[span^="12"] { --gds-grid-col-start: 12  }
    &[span^="13"] { --gds-grid-col-start: 13  }
    &[span^="14"] { --gds-grid-col-start: 14  }
    &[span^="15"] { --gds-grid-col-start: 15  }
    &[span^="16"] { --gds-grid-col-start: 16  }
    &[span^="17"] { --gds-grid-col-start: 17  }
    &[span^="18"] { --gds-grid-col-start: 18  }
    &[span^="19"] { --gds-grid-col-start: 19  }
    &[span^="20"] { --gds-grid-col-start: 20  }
    &[span^="21"] { --gds-grid-col-start: 21  }
    &[span^="22"] { --gds-grid-col-start: 22  }
    &[span^="23"] { --gds-grid-col-start: 23  }
    &[span^="24"] { --gds-grid-col-start: 24  }
  }

  /* span=...+width, span=...-end */
  /* prettier-ignore */
  gds-grid > gds-cell {
    &[span$="+1"],  &[span="1"]                  { --gds-grid-col-end: 1  }
    &[span$="+2"],  &[span$="-1"],  &[span="2"]  { --gds-grid-col-end: 2  }
    &[span$="+3"],  &[span$="-2"],  &[span="3"]  { --gds-grid-col-end: 3  }
    &[span$="+4"],  &[span$="-3"],  &[span="4"]  { --gds-grid-col-end: 4  }
    &[span$="+5"],  &[span$="-4"],  &[span="5"]  { --gds-grid-col-end: 5  }
    &[span$="+6"],  &[span$="-5"],  &[span="6"]  { --gds-grid-col-end: 6  }
    &[span$="+7"],  &[span$="-6"],  &[span="7"]  { --gds-grid-col-end: 7  }
    &[span$="+8"],  &[span$="-7"],  &[span="8"]  { --gds-grid-col-end: 8  }
    &[span$="+9"],  &[span$="-8"],  &[span="9"]  { --gds-grid-col-end: 9  }
    &[span$="+10"], &[span$="-9"],  &[span="10"] { --gds-grid-col-end: 10 }
    &[span$="+11"], &[span$="-10"], &[span="11"] { --gds-grid-col-end: 11 }
    &[span$="+12"], &[span$="-11"], &[span="12"] { --gds-grid-col-end: 12 }
    &[span$="+13"], &[span$="-12"], &[span="13"] { --gds-grid-col-end: 13 }
    &[span$="+14"], &[span$="-13"], &[span="14"] { --gds-grid-col-end: 14 }
    &[span$="+15"], &[span$="-14"], &[span="15"] { --gds-grid-col-end: 15 }
    &[span$="+16"], &[span$="-15"], &[span="16"] { --gds-grid-col-end: 16 }
    &[span$="+17"], &[span$="-16"], &[span="17"] { --gds-grid-col-end: 17 }
    &[span$="+18"], &[span$="-17"], &[span="18"] { --gds-grid-col-end: 18 }
    &[span$="+19"], &[span$="-18"], &[span="19"] { --gds-grid-col-end: 19 }
    &[span$="+20"], &[span$="-19"], &[span="20"] { --gds-grid-col-end: 20 }
    &[span$="+21"], &[span$="-20"], &[span="21"] { --gds-grid-col-end: 21 }
    &[span$="+22"], &[span$="-21"], &[span="22"] { --gds-grid-col-end: 22 }
    &[span$="+23"], &[span$="-22"], &[span="23"] { --gds-grid-col-end: 23 }
    &[span$="+24"], &[span$="-23"], &[span="24"] { --gds-grid-col-end: 24 }
  }

  /* prettier-ignore */
  gds-grid > gds-cell { 
    &[span] { grid-column-end: span var(--gds-grid-col-end) }
    &[span*="+"],
    &[span*="-"],
    &[span*=".."]  { grid-column-start: var(--gds-grid-col-start) }
    &[span*="-"],
    &[span*=".."] { grid-column-end: var(--gds-grid-col-end) }
    &[span="row"] { grid-column: 1 / -1 } 
  }
}
